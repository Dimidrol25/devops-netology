## Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"  
***
### 1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?  
Для Linux: `ip a`  
![avatar](https://i.ibb.co/54yjtgM/ip-a.jpg)  

Для Windows: `ipconfig`  
![avatar](https://i.ibb.co/VDX64Gv/ipconfig.jpg)  

### 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?  
Для распознавания соседа используется протокол `LLDP`. Пакет называется `lldp`. Команда `lldpctl`.  

### 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.  
Для разделения коммутатора на L2 используется технология `VLAN` (виртуальная локальная сеть). Для обеспечения работы `VLAN` необходимо установить пакет `vlan` и прописать настройки в конфиге.  
Добавил vlan-интерфейс через `netplan`:  
![avatar](https://i.ibb.co/CwjcB8R/config.jpg)  
`netplan apply`  
![avatar](https://i.ibb.co/9r28cMq/vlan.jpg)  
  
### 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.  
`Bonding` - это объединение сетевых интерфейсов по определенному типу агрегации, Служит для увеличения пропускной способности и/или отказоустойчивость сети.  
<details>
<summary>Типы агрегации интерфейсов в Linux</summary>

`Mode-0(balance-rr)` – Данный режим используется по умолчанию. `Balance-rr` обеспечивается балансировку нагрузки и отказоустойчивость. В данном режиме сетевые пакеты отправляются "по кругу", от первого интерфейса к последнему. Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка.  

`Mode-1(active-backup)` - Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.  

`Mode-2(balance-xor)` - Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость. Не требуется дополнительной настройки коммутатора/коммутаторов.  

`Mode-3(broadcast)` - Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. Рекомендуется только для использования MULTICAST трафика.  

`Mode-4(802.3ad)` - динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и настройка коммутатора/коммутаторов.  

`Mode-5(balance-tlb)` - Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.  

`Mode-6(balance-alb)` - Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.  
</details>  


Пример конфига:  
> The primary network interface  
> auto bond0  
> iface bond0 inet static  
>     address 192.168.1.150  
>     netmask 255.255.255.0  
>     gateway 192.168.1.1  
>     dns-nameservers 192.168.1.1 8.8.8.8  
>     dns-search domain.local  
>         slaves eth0 eth1  
>         bond_mode 0  
>         bond-miimon 100  
>         bond_downdelay 200  
>         bound_updelay 200  

Как видно из конфигурации, мы создаем виртуальный интерфейс `bond0`, присваиваем ему сетевые параметры, указываем какие физические интерфейсы будут "подчиняться" и указываем в каком режиме будет работать `bonding`.  
### 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.  
- Сколько IP адресов в сети с маской /29?  
> ipcalc 192.168.1.0/29  
> Hosts/Net: 6  

- Сколько /29 подсетей можно получить из сети с маской /24?  
> ipcalc 192.168.1.0/24 /29  
> 32 подсети, 192 хоста  

- Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24  
> 1.  
> Network:   10.10.10.0/29  
> HostMin:   10.10.10.1  
> HostMax:   10.10.10.6  
> Broadcast: 10.10.10.7  
> Hosts/Net: 6  

> 16.
> Network:   10.10.10.120/29  
> HostMin:   10.10.10.121  
> HostMax:   10.10.10.126  
> Broadcast: 10.10.10.127  
> Hosts/Net: 6  

> 32.  
> Network:   10.10.10.248/29  
> HostMin:   10.10.10.249  
> HostMax:   10.10.10.254  
> Broadcast: 10.10.10.255  
> Hosts/Net: 6  

### 6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.  
Допускается взять адреса из подсети CGNAT 100.64.0.0/10  
> vagrant@vagrant:/$ vagrant@vagrant:/$ ipcalc -s 50 100.64.0.0/10  
> 1. Requested size: 50 hosts  
> Netmask:   255.255.255.192 = 26  
> Network:   100.64.0.0/26  
> HostMin:   100.64.0.1  
> HostMax:   100.64.0.62  
> Broadcast: 100.64.0.63  
> Hosts/Net: 62  

### 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?  
Linux:
- проверить таблицу  
`arp`  
- очистить кэш  
`ip neigh flush all`  
- удаление одной записи  
`arp -d ip-адрес`  

Windows:
- проверить таблицу  
`arp -a`  
- очистить кэш  
`netsh interface ip delete arpcache`  
- удаление одной записи  
`arp -d ip-адрес`  
